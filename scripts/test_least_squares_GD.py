
import numpy as np
import matplotlib.pyplot as plt
from proj1_helpers import *
import os

DATA_TEST_PATH = os.path.abspath("data/test.csv")


if __name__ == "__main__":
    _, tX_test, ids_test = load_csv_data(DATA_TEST_PATH)
    w_0 = [0.01961554,-0.031634,0.00129248,0.00064837,0.01658577,0.00064837,0.0091058,-0.02553715,0.0114928,0.02272436,0.00044868,-0.00042456,-0.00901821,0.00107088,0.00034163,-0.01794853,3.353939e-05,0.00762703]

    w_1 = [0.01549019,-0.02573457,-0.00218503,0.01127407,0.00414656,0.00342746,0.01204193,-0.01669701,0.02256913,0.01780382,-0.00030234,-0.00068491,-0.00516342,-0.00098665,0.00033702,0.00043379,0.00080844,0.00969615,0.0115404,-0.00021128,-0.0002141,0.0115404]

    w_23 = [0.01422413,-0.0227139,-0.00302169,0.01232911,0.02739225,0.02661731,-0.02427962,-0.00212733,-0.01498883,-0.0008165, -0.01259857,0.02220924,0.0263065,0.01439111,-0.00104549,-0.00018696,-0.00309264,-0.00097601,0.00038004,0.004495,0.00089159,-0.00509023,-0.01687596,0.00250862,0.0003366,0.00020789,-0.00207168,0.00015157,-0.00055299,-0.00408472]


    y_pred = np.zeros((len(tX_test),1))
    for i in range(0,len(tX_test)):
        if tX_test[i,22] == 0:
            tmp = np.delete(tX_test[i,:], [0,4,5,6,12,22,23,24,25,26,27,28,29])
            y_pred[i] = np.dot(tmp, w_0)
        if tX_test[i,22] == 1:
            tmp = np.delete(tX_test[i,:], [4,5,6,12,22,26,27,28])
            y_pred[i] = np.dot(tmp, w_1)
        else:
            y_pred[i] = np.dot(tX_test[i], w_23)
    y_pred[np.where(y_pred <= 0)] = -1
    y_pred[np.where(y_pred > 0)] = 1
    create_csv_submission(ids_test, y_pred, 'resultstest.csv')