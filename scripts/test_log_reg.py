import numpy as np
import matplotlib.pyplot as plt
from proj1_helpers import *
import os
PROJECT_PATH = os.path.dirname(os.getcwd())
DATA_TEST_PATH = PROJECT_PATH + '/data/test.csv'

if __name__ == "__main__":
    _, tX_test, ids_test = load_csv_data(DATA_TEST_PATH)
    w_0 =  [[-8.26279236e-03], [-3.96211063e-03], [ 3.53882825e+01], [ 1.08146348e-01], [-3.53919467e+01], [-1.28569882e-01], [-5.09353615e-01], [ 5.83419533e-02], [ 1.23131590e-01], [-7.69579092e-04], [-1.23140038e-03], [ 1.47200427e-01], [ 4.24308544e-03], [-6.29127830e-04], [ 3.33966778e-03], [-2.16377809e-03], [ 5.18145441e-06]]
    w_1 =  [[ 2.65098186e-04], [-8.75722696e-03], [-2.38362277e-03], [-4.02699440e-03], [-4.60691111e-02], [ 2.85356766e-03], [-4.39467597e+00], [-4.52221258e-01], [ 1.35234811e-01], [ 4.39512000e+00], [ 3.01854872e-03], [-2.68881412e-03], [ 4.40972121e+00], [-6.80752658e-03], [-3.21421635e-04], [ 3.90591124e-03], [ 2.22975440e-03], [-1.35486659e-03], [-5.70148464e+01], [-1.26229990e-04], [ 1.18813870e-05], [ 6.14119588e+01]]
    w_23 = [[ 3.39263385e-04], [-6.10576663e-03], [-4.71709335e-03], [ 2.36452197e-03], [-4.51490368e-02], [ 6.91497020e-04], [-3.01986814e-03], [ 2.95501564e-01], [-1.16624183e-04], [-1.99694751e+00], [-2.53833117e-01], [ 1.57704258e-01], [ 4.96286318e-01], [ 2.00282199e+00], [-5.78643176e-03], [-6.02807510e-04], [ 2.00825910e+00], [-7.74670340e-03], [ 1.91916738e-03], [ 2.09129876e-03], [ 4.08060095e-03], [-1.95140501e-03], [-5.64240460e-01], [-5.22006513e-03], [ 4.09269887e-03], [4.04702429e-03], [-2.41936785e-03], [ 4.04324551e-03], [-1.20621604e-03], [ 2.00007494e+00]]

    y_pred = np.zeros((len(tX_test),1))
    for i in range(0,len(tX_test)):
        if tX_test[i,22] == 0:
            tmp = np.delete(tX_test[i,:], [0,4,5,6,12,22,23,24,25,26,27,28,29])
            y_pred[i] = np.dot(tmp, w_0)
        if tX_test[i,22] == 1:
            tmp = np.delete(tX_test[i,:], [4,5,6,12,22,26,27,28])
            y_pred[i] = np.dot(tmp, w_1)
        else:
            y_pred[i] = np.dot(tX_test[i], w_23)
    y_pred[np.where(y_pred <= 0)] = -1
    y_pred[np.where(y_pred > 0)] = 1
    create_csv_submission(ids_test, y_pred, 'resultstest.csv')
